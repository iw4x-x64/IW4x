<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>bx(1) build2 0.18.0-a.0.z</title>

  <style type="text/css">
/* file      : common.css
 * license   : MIT; see accompanying LICENSE file
 */

html
{
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-weight: normal;
  font-size: 18px;
  line-height: 1.4em;
  letter-spacing: 0.01em;

  color: #292929;
}

body {margin: 0;} /* There is non-0 default margin for body. */

/* See notes on what's going on here. */
body {min-width: 17em;}
@media only screen and (min-width: 360px)
{
  body {min-width: 19em;}
}

/*
 * Header (optional).
 */

#header-bar
{
  width: 100%;

  background: rgba(0, 0, 0, 0.04);
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);

  padding: .4em 0 .42em 0;
  margin: 0 0 1.4em 0;
}

#header
{
  /* Same as in #content. */
  max-width: 41em;
  margin: 0 auto 0 auto;
  padding: 0 .4em 0 .4em;

  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;

  width: 100%;
  display: table;
  border: none;
  border-collapse: collapse;
}

#header-logo, #header-menu
{
  display: table-cell;
  border: none;
  padding: 0;
  vertical-align: middle;
}

#header-logo {text-align: left;}
#header-menu {text-align: right;}

/* These overlap with #header's margin because of border collapsing. */
#header-logo {padding-left: .4em;}
#header-menu {padding-right: .4em;}

#header-logo a
{
  color: #000;
  text-decoration: none;
  outline: none;
}
#header-logo a:visited {color: #000;}
#header-logo a:hover, #header-logo a:active {color: #000;}

#header-menu a
{
  font-size: 0.889em;
  line-height: 1.4em;
  text-align: right;
  margin-left: 1.2em;
  white-space: nowrap;
  letter-spacing: 0;
}

#header-menu a
{
  color: #000;
  outline: none;
}
#header-menu a:visited {color: #000;}
#header-menu a:hover, #header-menu a:active
{
  color: #3870c0;
  text-decoration: none;
}

/* Flexbox-based improvements though the above works reasonably well. */
#header-menu-body
{
  width: 100%;

  display: -webkit-inline-flex;
  display: inline-flex;

  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;

  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}

/* Whether we want it (and at which point) depends on the size of the menu. */
/*
@media only screen and (max-width: 567px)
{
  #header-menu-body
  {
    -webkit-flex-direction: column;
    flex-direction: column;
  }
}
*/

/*
 * Content.
 */

#content
{
  max-width: 41em;
  margin: 0 auto 0 auto;
  padding: 0 .4em 0 .4em; /* Space between text and browser frame. */

  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

/*
 * Footer (optional).
 */

#footer
{
  color: #767676;
  font-size: 0.7223em;
  line-height: 1.3em;
  margin: 2.2em 0 1em 0;
  text-align: center;
}

#footer a
{
  color: #767676;
  text-decoration: underline;
}
#footer a:visited {color: #767676;}
#footer a:hover, #footer a:active {color: #3870c0;}

/* Screen size indicator in the footer. The before/after content is in case
   we don't have any content in the footer. Margin is to actually see the
   border separate from the browser frame. */

/*
#footer:before {content: "\A0";}
#footer:after {content: "\A0";}

#footer
{
  border-left: 1px solid;
  border-right: 1px solid;
  margin-left: 1px;
  margin-right: 1px;
}

@media only screen and (max-width: 359px)
{
  #footer {border-color: red;}
}

@media only screen and (min-width: 360px) and (max-width: 567px)
{
  #footer {border-color: orange;}
}

@media only screen and (min-width: 568px) and (max-width: 1023px)
{
  #footer {border-color: blue;}
}

@media only screen and (min-width: 1024px)
{
  #footer {border-color: green;}
}
*/

/*
 * Common elements.
 */

p, li, dd {text-align: justify;}
.code {text-align: left;} /* Manually aligned. */
pre {text-align: left;}   /* If it is inside li/dd. */

/* Notes. */

.note
{
  color: #606060;
}

div.note
{
  margin: 2em 0 2em 0; /* The same top/bottom margings as pre box. */

  padding-left: 0.5em;
  border: 0.25em;
  border-left-style: solid;
  border-color: #808080;

  page-break-inside: avoid;
}

div.note :first-child {margin-top:    0;}
div.note :last-child  {margin-bottom: 0;}

span.note::before {content: "[Note: "}
span.note::after  {content: "]"}

/* Links. */
a
{
  color: #3870c0;
  /*color: #4078c0;*/
  text-decoration: none;
}

a:hover, a:active
{
/*color: #006fbf;*/
/*color: #0087e7;*/
  text-decoration: underline;
}

a:visited
{
/*color: #003388;*/
  color: #00409c;
}

/* Standard paragraph. */

p, pre {margin: 1em 0 1em 0;}

/* Standard lists. */
ul, ol, dl {margin: 1em 0 1em 0;}
ul li, ol li {margin: 0 0 .4em 0;}
ul li {list-style-type: circle;}
dl dt {margin: 0 0 0 0;}
dl dd {margin: 0 0 .6em 1.8em;}

code, pre
{
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 0.92em;
  letter-spacing: 0;
}

pre {white-space: pre-wrap;}
@media only screen and (max-width: 567px)
{
  pre {word-break: break-all;}
}

/* Use page rather than system font settings. */
input
{
  font-family: inherit;
  font-weight: inherit;
  font-size:   inherit;
  line-height: inherit;
}

/* file      : pre-box.css
 * license   : MIT; see accompanying LICENSE file
 */

/* Note: see also p-code-box.css. */

pre
{
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 0.2em;
  padding: .8em .4em .8em .4em;
  margin: 2em -.4em 2em -.4em; /* Use margins of #content. */
}

/* file      : man.css
 * license   : MIT; see accompanying LICENSE file
 */

/* Bases:
 *
 * common.css
 * pre-box.css
 *
 */

#content
{
  max-width: 42.1em;
  padding-left: 1.5em; /* Reserve for the heading. */
}

h1
{
  font-weight: normal;
  font-size: 1.58em;
  line-height: 1.4em;
  margin: 1.6em 0 .6em -.88em;
}

/* Definition list for options. */
dl.options dt {margin: 1em 0 0 0;}
dl.options dd {margin: .1em 0 0 4.5em;}

/* Make lists inside option descriptions a tad smaller. */
dl.options dd ul, dl.options dd ol, dl.options dd dl
{
  font-size: 0.889em;
  line-height: 1.4em;
}

  </style>

</head>
<body>
<div id="content">

  <h1>NAME</h1>

  <p><b><code>bx</code></b> &#8211; shell script and task runner</p>
  <h1>SYNOPSIS</h1>

  <p class="code"><code><b>bx</b> [<i>options</i>] <i>path</i> [<i>arg</i>...]
  <br/>
  <b>bx</b> [<i>options</i>] <i>task</i> [<i>arg</i>...]
  <br/>
  <b>bx</b> [<i>options</i>] [<b>--</b> <i>arg</i>...]</code></p>

  <h1>DESCRIPTION</h1>

  <p>The <code><b>build2</b></code> shell script and task runner executes a
  script (first form) or a task (second and third form) with optional
  arguments.</p>

  <p>The first argument after <code><i>options</i></code> determines whether
  it is a shell script path or a task name. It is considered a script if it
  contains the directory separator or the <code><b>.bx</b></code> extension.
  Otherwise, it is considered a task name. Absent first argument means the
  default task. In this case the <code><b>--</b></code> separator must be used
  if you wish to pass arguments to the default task. Note that neither the
  script path nor task name can start with <code><b>-</b></code>.</p>

  <p>Note that task running is not yet implemented.</p>

  <p>The recommended first line ("shebang") for an executable script is as
  follows:</p>

  <pre>#! /usr/bin/env bx</pre>

  <h1 id="options">OPTIONS</h1>

  <dl class="options">
    <dt><code><b>-v</b></code></dt>
    <dd>Print actual commands being executed. This options is equivalent to
    <code><b>--verbose 2</b></code>.</dd>

    <dt><code><b>-V</b></code></dt>
    <dd>Print all underlying commands being executed. This options is
    equivalent to <code><b>--verbose 3</b></code>.</dd>

    <dt><code><b>--quiet</b></code>|<code><b>-q</b></code></dt>
    <dd>Run quietly, only printing error messages. This option is equivalent
    to <code><b>--verbose 0</b></code>.</dd>

    <dt><code><b>--verbose</b></code> <code><i>level</i></code></dt>
    <dd>Set the diagnostics verbosity to <code><i>level</i></code> between 0
    and 6. Level 0 disables any non-error messages while level 6 produces lots
    of information, with level 1 being the default. The following additional
    types of diagnostics are produced at each level:

    <ol>
    <li>High-level information messages.</li>

    <li>Essential underlying commands being executed.</li>

    <li>All underlying commands being executed.</li>

    <li>Information that could be helpful to the user.</li>

    <li>Information that could be helpful to the developer.</li>

    <li>Even more detailed information.</li>
    </ol></dd>

    <dt><code><b>--diag-color</b></code></dt>
    <dd>Use color in diagnostics. If printing to a terminal the color is used
    by default provided the terminal is not dumb. Use
    <code><b>--no-diag-color</b></code> to suppress.</dd>

    <dt><code><b>--no-diag-color</b></code></dt>
    <dd>Don't use color in diagnostics.</dd>

    <dt><code><b>--max-stack</b></code> <code><i>num</i></code></dt>
    <dd>The maximum stack size in KBytes to allow for newly created threads.
    For <i>pthreads</i>-based systems the driver queries the stack size of the
    main thread and uses the same size for creating additional threads. This
    allows adjusting the stack size using familiar mechanisms, such as
    <code><b>ulimit</b></code>. Sometimes, however, the stack size of the main
    thread is excessively large. As a result, the driver checks if it is
    greater than a predefined limit (64MB on 64-bit systems and 32MB on 32-bit
    ones) and caps it to a more sensible value (8MB) if that's the case. This
    option allows you to override this check with the special zero value
    indicating that the main thread stack size should be used as is.</dd>

    <dt><code><b>--pager</b></code> <code><i>path</i></code></dt>
    <dd>The pager program to be used to show long text. Commonly used pager
    programs are <code><b>less</b></code> and <code><b>more</b></code>. You
    can also specify additional options that should be passed to the pager
    program with <code><b>--pager-option</b></code>. If an empty string is
    specified as the pager program, then no pager will be used. If the pager
    program is not explicitly specified, then <code><b>b</b></code> will try
    to use <code><b>less</b></code>. If it is not available, then no pager
    will be used.</dd>

    <dt><code><b>--pager-option</b></code> <code><i>opt</i></code></dt>
    <dd>Additional option to be passed to the pager program. See
    <code><b>--pager</b></code> for more information on the pager program.
    Repeat this option to specify multiple pager options.</dd>

    <dt><code><b>--options-file</b></code> <code><i>file</i></code></dt>
    <dd>Read additional options from <code><i>file</i></code>. Each option
    should appear on a separate line optionally followed by space or equal
    sign (<code><b>=</b></code>) and an option value. Empty lines and lines
    starting with <code><b>#</b></code> are ignored. Option values can be
    enclosed in double (<code><b>"</b></code>) or single
    (<code><b>'</b></code>) quotes to preserve leading and trailing
    whitespaces as well as to specify empty values. If the value itself
    contains trailing or leading quotes, enclose it with an extra pair of
    quotes, for example <code><b>'"x"'</b></code>. Non-leading and
    non-trailing quotes are interpreted as being part of the option value.

    <p>The semantics of providing options in a file is equivalent to providing
    the same set of options in the same order on the command line at the point
    where the <code><b>--options-file</b></code> option is specified except
    that the shell escaping and quoting is not required. Repeat this option to
    specify more than one options file.</p></dd>

    <dt><code><b>--default-options</b></code> <code><i>dir</i></code></dt>
    <dd>The directory to load additional default options files from.</dd>

    <dt><code><b>--no-default-options</b></code></dt>
    <dd>Don't load default options files.</dd>

    <dt><code><b>--help</b></code></dt>
    <dd>Print usage information and exit.</dd>

    <dt><code><b>--version</b></code></dt>
    <dd>Print version and exit.</dd>
  </dl>

  <h1>DEFAULT OPTIONS FILES</h1>

  <p>Instead of having a separate config file format for tool configuration,
  the <code><b>build2</b></code> toolchain uses <i>default options files</i>
  which contain the same options as what can be specified on the command line.
  The default options files are like options files that one can specify with
  <code><b>--options-file</b></code> except that they are loaded by
  default.</p>

  <p>The default options files for <code><b>bx</b></code> are called
  <code><b>bx.options</b></code>, <code><b>bx-script.options</b></code> (shell
  script only), and <code><b>bx-task.options</b></code> (task only) and are
  searched for in the <code><b>.build2/</b></code> subdirectory of the home
  directory and in the system directory (for example,
  <code><b>/etc/build2/</b></code>) if configured. Note that besides options
  the <code><b>bx-task.options</b></code> file can also contain global
  variable overrides (@@ only for task running?).</p>

  <p>Once the search is complete, the files are loaded in the reverse order,
  that is, beginning from the system directory (if any), followed by the home
  directory, and finishing off with the options specified on the command line.
  For each directory <code><b>bx.options</b></code>, if found, is loaded
  first, followed by <code><b>bx-script.options</b></code> for a shell script
  and <code><b>bx-task.options</b></code> for a task. In other words, the
  files are loaded from the more generic to the more specific with the command
  line options having the ability to override any values specified in the
  default options files.</p>

  <p>If a default options file contains
  <code><b>--no-default-options</b></code>, then the search is stopped at the
  directory containing this file and no outer files are loaded. If this option
  is specified on the command line, then none of the default options files are
  searched for or loaded.</p>

  <p>An additional directory containing default options files can be specified
  with <code><b>--default-options</b></code>. Its configuration files are
  loaded after the home directory.</p>

  <p>The order in which default options files are loaded is traced at the
  verbosity level 3 (<code><b>-V</b></code> option) or higher.</p>

  <h1>EXIT STATUS</h1>

  <p>In case of a script execution, the script exit code is returned. In case
  of a task execution, non-zero exit status is returned in case of an
  error.</p>

  <h1>ENVIRONMENT</h1>

  <p>The <code><b>HOME</b></code> environment variable is used to determine
  the user's home directory. If it is not set, then
  <code><b>getpwuid(3)</b></code> is used instead. This value is used to
  shorten paths printed in diagnostics by replacing the home directory with
  <code><b>~/</b></code>. It is also made available to scripts as the
  <code><b>shell.home</b></code> variable.</p>

  <p>The <code><b>BUILD2_DEF_OPT</b></code> environment variable is used to
  suppress loading of default options files in nested runner invocations. Its
  values are <code><b>false</b></code> or <code><b>0</b></code> to suppress
  and <code><b>true</b></code> or <code><b>1</b></code> to load.</p>

  <h1>BUGS</h1>

  <p>Send bug reports to the
  <a href="mailto:users@build2.org">users@build2.org</a> mailing list.</p>

</div>

<div id="footer">
Copyright &#169; 2014-2026 the build2 authors.<br/>
Permission is granted to copy, distribute and/or modify this document under
the terms of the MIT License.
</div>

</body>
</html>
